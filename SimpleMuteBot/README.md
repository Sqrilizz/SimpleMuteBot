# SimpleMuteBot

Discord бот для модерации с автоматическими фильтрами сообщений и поддержкой нескольких языков.

## Основные возможности

### Поддержка языков
- Автоматическое определение языка сервера
- Простая настройка через `/setup`
- Поддержка русского и английского языков
- Локализованные ответы и команды

### Автоматические фильтры

1. **Анти-спам** - Мут за флуд и спам
2. **Анти-капс** - Мут за избыточное использование заглавных букв
3. **Фильтр ссылок** - Защита от нежелательных ссылок
4. **Авто-размут** - Автоматическое снятие мута по истечении срока

### Команды модерации

- `/mute` (`/мут`) - Задать мут пользователю
- `/unmute` (`/размут`) - Снять мут
- `/ban` (`/бан`) - Забанить пользователя
- `/unban` (`/разбан`) - Разбанить
- `/kick` (`/кик`) - Кикнуть пользователя
- `/timeout` - Временная блокировка
- `/setup` - Настройка бота

### Логирование
- Детальное логирование всех действий
- Настраиваемый канал для логов
- Сохранение истории мутов

### Команды управления фильтрами

- `/filterstats` - Показать статистику фильтров
- `/filterrules` - Показать правила фильтров

## Быстрый старт

### Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/ваш-пользователь/SimpleMuteBot.git
cd SimpleMuteBot
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

### Настройка

1. Создайте бота на [Discord Developer Portal](https://discord.com/developers/applications)
2. Пригласите бота на сервер с правами:
   - Чтение/отправка сообщений
   - Бан участников
   - Тайм-ауты
   - Управление ролями

3. Настройте `config.py`:
```python
DISCORD_TOKEN = "ваш_токен_бота"
LOG_CHANNEL_ID = 1234567890  # ID канала для логов
SUPPRESS_LOGS = False  # Отключить логи в консоль
```

4. Запустите бота:
```bash
python main.py
```

5. Настройте язык на сервере:
```
/setup язык: Русский
```

## Дополнительные настройки

### Настройка фильтров

Файл `filter_config.py`:

```python
FILTER_CONFIG = {
    "spam": {
        "threshold": 3,  # Количество сообщений
        "time_window": 120,  # Время в секундах
        "mute_duration": "5m"  # Длительность мута
    },
    "caps": {
        "threshold": 0.75,  # Процент капса
        "min_length": 5,  # Минимальная длина
        "mute_duration": "5m"
    },
    "links": {
        "mute_duration": "10m",
        "forbidden_links": ["discord.gg", "t.me"],  # Удаляются
        "allowed_websites": ["youtube.com", "github.com"]  # Разрешены
    }
}
```

## Запуск

```bash
python main.py
```

## Запуск веб-панели

```bash
python webpanel.py
```

## Правила фильтров

### Спам
- Отслеживает количество сообщений пользователя
- При превышении лимита - автоматический мут
- Настройка: 3 сообщения за 2 минуты → мут 5 минут

### Капс
- Проверяет процент заглавных букв
- Игнорирует сообщения короче 5 символов
- Настройка: более 75% заглавных букв

### Ссылки
- **Запрещенные**: Discord, Telegram ссылки (удаление)
- **Разрешенные**: YouTube, GitHub, Wikipedia и др. (пропуск)
- **Неразрешенные**: Все остальные (мут 10 минут)

### Исключения
- Администраторы и модераторы не подвержены правилам
- Боты игнорируются автоматически

## Структура файлов

```
SimpleMuteBot/
├── main.py              # Главный файл бота
├── config.py            # Основная конфигурация
├── filter_config.py     # Настройки фильтров
├── filters.py           # Система фильтрации
├── cogs/
│   └── moderation.py    # Команды модерации
└── requirements.txt     # Зависимости
```

## Логирование

Все действия модерации логируются в:
- Консоль
- Файл `bot.log`
- Discord канал (настраивается в `config.py`) # SimpleMuteBot
